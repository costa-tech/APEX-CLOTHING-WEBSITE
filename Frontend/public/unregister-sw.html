<!DOCTYPE html>
<html>
<head>
  <title>Unregister Service Workers</title>
</head>
<body>
  <h1>Unregistering Service Workers...</h1>
  <p id="status">Processing...</p>
  <script>
    async function unregisterServiceWorkers() {
      const status = document.getElementById('status');
      
      if ('serviceWorker' in navigator) {
        const registrations = await navigator.serviceWorker.getRegistrations();
        
        if (registrations.length === 0) {
          status.innerHTML = 'No service workers found. ✅';
        } else {
          for (let registration of registrations) {
            await registration.unregister();
            status.innerHTML += `<br>Unregistered service worker: ${registration.scope} ✅`;
          }
          
          // Clear all caches
          const cacheNames = await caches.keys();
          for (let cacheName of cacheNames) {
            await caches.delete(cacheName);
            status.innerHTML += `<br>Deleted cache: ${cacheName} ✅`;
          }
          
          status.innerHTML += '<br><br><strong>All service workers and caches cleared! Please close this tab and hard refresh (Ctrl+Shift+R) your app.</strong>';
        }
      } else {
        status.innerHTML = 'Service workers not supported in this browser.';
      }
    }
    
    unregisterServiceWorkers();
  </script>
</body>
</html>
